<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Horse Galoping — Lux Demo Show</title>
  <meta name="description" content="A sophisticated, luxurious demo of a galloping horse with parallax scenery, cinematic lighting, and interactive controls." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Playfair+Display:wght@600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0c10;            /* night obsidian */
      --panel:#11131a;         /* eclipse */
      --ink:#f1f2f6;           /* ivory */
      --muted:#aeb3c2;         /* moonstone */
      --gold:#d7b776;          /* antique gold */
      --gold-2:#f3e2b8;        /* pale gild */
      --accent:#7f72ff;        /* royal violet */

      /* Runtime controls */
      --speed: 1;              /* base 1x speed */
      --parallax: calc(var(--speed) * 1);
      --horse-scale: 1.0;
    }
    *{box-sizing:border-box}
    html,body{height:100%;}
    body{margin:0; background:radial-gradient(1200px 500px at 20% -10%, rgba(127,114,255,.18), transparent 60%), linear-gradient(180deg,#0b0c10 0%, #0b0c10 40%, #0e1118 100%); color:var(--ink); font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}
    a{color:var(--gold)} a:hover{color:var(--gold-2)}

    /* Top bar */
    header{position:fixed; inset:0 0 auto 0; padding:14px 20px; z-index:50; backdrop-filter:saturate(140%) blur(10px); background:linear-gradient(180deg, rgba(10,10,14,.85), rgba(10,10,14,.35)); border-bottom:1px solid rgba(255,255,255,.06)}
    .nav{max-width:1200px; margin:0 auto; display:flex; align-items:center; justify-content:space-between; gap:16px}
    .brand{display:flex; align-items:center; gap:12px}
    .brand svg{width:40px; height:40px}
    .brand .t{font-family:"Playfair Display", serif; font-size:1.15rem; font-weight:800; letter-spacing:.2px}
    .brand .s{font-size:.75rem; color:var(--muted)}

    .controls{display:flex; align-items:center; gap:14px; flex-wrap:wrap}
    .chip{display:flex; align-items:center; gap:8px; padding:8px 10px; border:1px solid rgba(255,255,255,.12); border-radius:12px; background:rgba(255,255,255,.04)}
    label{font-size:.8rem; color:var(--muted)}
    input[type="range"]{accent-color:var(--gold); width:140px}
    select, button{background:#0f1016; color:var(--ink); border:1px solid rgba(255,255,255,.14); border-radius:10px; padding:8px 10px; font-weight:600}
    button{cursor:pointer}
    .cta{background:linear-gradient(135deg,var(--gold),var(--gold-2)); color:#241e0e; border:none}

    /* Stage */
    .stage{position:relative; height:100vh; overflow:hidden}
    .stage-inner{position:absolute; inset:0; top:60px}

    /* Stars & moon */
    .sky{position:absolute; inset:0; background:radial-gradient(600px 300px at 80% 10%, rgba(255,255,255,.08), transparent 60%)}
    .stars{position:absolute; inset:0; background-image:radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.7), transparent 40%), radial-gradient(1px 1px at 60% 20%, rgba(255,255,255,.5), transparent 40%), radial-gradient(1px 1px at 80% 60%, rgba(255,255,255,.55), transparent 40%), radial-gradient(2px 2px at 30% 70%, rgba(255,255,255,.6), transparent 40%)}
    .aurora{position:absolute; inset:0; mix-blend-mode:screen; background:conic-gradient(from 140deg at 70% 5%, rgba(127,114,255,.18), transparent 70%)}

    /* Parallax layers */
    .layer{position:absolute; left:0; right:0; bottom:0; height:60vh; pointer-events:none}
    .l1, .l2, .l3, .l4{mask-image:linear-gradient(180deg, transparent 0%, black 10%, black 100%)}
    .l1{height:55vh; background:linear-gradient(180deg, rgba(127,114,255,.05), rgba(127,114,255,0));}
    .l2{background: repeating-linear-gradient( -10deg, rgba(255,255,255,.03) 0 20px, rgba(255,255,255,.0) 20px 40px ); opacity:.35; animation: scroll-l2 calc(36s/var(--parallax)) linear infinite;}
    .l3{background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="800" height="200" viewBox="0 0 800 200"><path d="M0 150 C 150 130 250 170 400 150 C 520 130 620 170 800 150 L800 200 L0 200 Z" fill="%23151925"/></svg>') repeat-x bottom; background-size:800px 200px; opacity:.8; animation: scroll-l3 calc(18s/var(--parallax)) linear infinite;}
    .l4{background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="600" height="180" viewBox="0 0 600 180"><path d="M0 130 C 60 120 120 140 180 130 C 240 120 300 140 360 130 C 420 120 480 140 540 130 C 560 128 580 126 600 124 L600 180 L0 180 Z" fill="%2310161e"/></svg>') repeat-x bottom; background-size:600px 180px; animation: scroll-l4 calc(8s/var(--parallax)) linear infinite;}

    @keyframes scroll-l2{to{background-position:-800px 0}}
    @keyframes scroll-l3{to{background-position:-800px bottom}}
    @keyframes scroll-l4{to{background-position:-600px bottom}}

    /* Ground line */
    .ground{position:absolute; left:0; right:0; bottom:16vh; height:2px; background:linear-gradient(90deg, transparent, rgba(243,226,184,.45), transparent); filter:blur(.5px)}

    /* Horse container */
    .horse-wrap{position:absolute; left:50%; bottom:19vh; transform:translateX(-50%) scale(var(--horse-scale)); width:540px; height:260px}
    .shadow{position:absolute; left:50%; transform:translateX(-50%); bottom:-6px; width:420px; height:24px; background:radial-gradient(60% 60% at 50% 50%, rgba(0,0,0,.45), transparent 70%); filter:blur(8px); opacity:.8}

    /* SVG styling */
    svg#horse{position:absolute; overflow:visible}
    #horse .fill{fill:#0c1016}
    #horse .metal{fill:url(#goldgrad)}
    #horse .mane{fill:#101827}
    #horse .eye{fill:#f7f7fb}

    /* Gallop animations (simplified biomechanics) */
    .anim *{transform-box: fill-box; transform-origin:center}
    .anim .neck{animation: neck 1s linear infinite}
    .anim .tail{animation: tail 1s linear infinite}
    .anim .earL{animation: ear 1s linear infinite}
    .anim .earR{animation: ear 1s linear infinite reverse}

    .anim .femurFL{animation: legA calc(0.75s/var(--parallax)) linear infinite}
    .anim .tibiaFL{animation: legB calc(0.75s/var(--parallax)) linear infinite}
    .anim .femurFR{animation: legA calc(0.75s/var(--parallax)) linear infinite reverse}
    .anim .tibiaFR{animation: legB calc(0.75s/var(--parallax)) linear infinite reverse}
    .anim .femurHL{animation: legC calc(0.75s/var(--parallax)) linear infinite reverse}
    .anim .tibiaHL{animation: legD calc(0.75s/var(--parallax)) linear infinite reverse}
    .anim .femurHR{animation: legC calc(0.75s/var(--parallax)) linear infinite}
    .anim .tibiaHR{animation: legD calc(0.75s/var(--parallax)) linear infinite}

    @keyframes neck{ 0%,100%{transform:rotate(-2deg)} 50%{transform:rotate(2deg)} }
    @keyframes tail{ 0%,100%{transform:rotate(10deg)} 50%{transform:rotate(-8deg)} }
    @keyframes ear{ 0%,100%{transform:rotate(0deg)} 30%{transform:rotate(6deg)} 60%{transform:rotate(-4deg)} }

    @keyframes legA{ 0%{transform:rotate(24deg)} 50%{transform:rotate(-28deg)} 100%{transform:rotate(24deg)} }
    @keyframes legB{ 0%{transform:rotate(-10deg)} 50%{transform:rotate(22deg)} 100%{transform:rotate(-10deg)} }
    @keyframes legC{ 0%{transform:rotate(-18deg)} 50%{transform:rotate(26deg)} 100%{transform:rotate(-18deg)} }
    @keyframes legD{ 0%{transform:rotate(22deg)} 50%{transform:rotate(-24deg)} 100%{transform:rotate(22deg)} }

    .paused *{animation-play-state:paused !important}

    /* Lower HUD */
    .hud{position:fixed; inset:auto 0 0 0; padding:12px 18px; z-index:40; display:flex; align-items:center; justify-content:center}
    .hud .panel{display:flex; align-items:center; gap:12px; padding:10px 14px; background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.12); border-radius:12px}

    /* Info card */
    .info{position:fixed; right:18px; top:80px; max-width:320px; background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.12); border-radius:14px; padding:14px; color:var(--muted)}
    .info h3{margin:0 0 6px; font-family:"Playfair Display", serif; color:var(--gold)}
  </style>
</head>
<body>
  <header>
    <div class="nav">
      <div class="brand" aria-label="Horse Galoping Show">
        <svg viewBox="0 0 120 120" role="img" aria-label="Crest">
          <defs>
            <linearGradient id="goldgrad" x1="0" x2="1">
              <stop offset="0" stop-color="#d7b776"/>
              <stop offset="1" stop-color="#f3e2b8"/>
            </linearGradient>
          </defs>
          <circle cx="60" cy="60" r="52" fill="url(#goldgrad)" opacity="0.18"/>
          <circle cx="60" cy="60" r="48" fill="none" stroke="url(#goldgrad)" stroke-width="2"/>
          <path d="M35 70 L60 40 L85 70" stroke="#f3e2b8" stroke-width="6" fill="none" stroke-linecap="round"/>
          <circle cx="60" cy="75" r="6" fill="#f3e2b8"/>
        </svg>
        <div>
          <div class="t">Horse Galoping</div>
          <div class="s">Lux Demo • Cinematic Parallax • SVG Gallop</div>
        </div>
      </div>
      <div class="controls" role="group" aria-label="Controls">
        <div class="chip"><label for="speed">Speed</label><input id="speed" type="range" min="0.5" max="2.5" step="0.01" value="1" /></div>
        <div class="chip"><label for="scale">Scale</label><input id="scale" type="range" min="0.6" max="1.4" step="0.01" value="1" /></div>
        <div class="chip"><label for="theme">Theme</label>
          <select id="theme">
            <option value="night" selected>Royal Night</option>
            <option value="dawn">Gilded Dawn</option>
            <option value="desert">Imperial Desert</option>
          </select>
        </div>
        <button id="toggle" class="cta">Pause</button>
      </div>
    </div>
  </header>

  <main class="stage" aria-label="Galloping Demo">
    <div class="stage-inner">
      <div class="sky"></div>
      <div class="stars"></div>
      <div class="aurora"></div>

      <!-- Parallax terrain -->
      <div class="layer l1"></div>
      <div class="layer l2"></div>
      <div class="layer l3"></div>
      <div class="layer l4"></div>
      <div class="ground"></div>

      <!-- Dust particles -->
      <canvas id="dust" aria-hidden="true"></canvas>

      <!-- Horse -->
      <div class="horse-wrap anim" id="horseWrap">
        <div class="shadow"></div>
        <svg id="horse" width="540" height="260" viewBox="0 0 540 260" aria-label="Galloping horse">
          <defs>
            <linearGradient id="goldgrad" x1="0" x2="1">
              <stop offset="0" stop-color="#d7b776"/>
              <stop offset="1" stop-color="#f3e2b8"/>
            </linearGradient>
            <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
              <feDropShadow dx="0" dy="0" stdDeviation="6" flood-color="#d7b776" flood-opacity="0.35"/>
            </filter>
          </defs>

          <!-- Body -->
          <g class="body" transform="translate(120,80)">
            <ellipse class="fill" cx="140" cy="70" rx="110" ry="52" filter="url(#glow)"/>
            <ellipse class="mane" cx="140" cy="70" rx="112" ry="54" opacity=".12"/>
          </g>

          <!-- Neck & Head -->
          <g class="neck" transform="translate(300,40)">
            <rect class="fill" x="-8" y="20" width="100" height="24" rx="12" transform="rotate(-10)"/>
            <g class="head" transform="translate(88,22) rotate(-6)">
              <rect class="fill" x="0" y="0" width="56" height="28" rx="14"/>
              <circle class="eye" cx="44" cy="10" r="3"/>
              <g class="earL" transform="translate(8,-10)"><rect class="fill" width="12" height="18" rx="6"/></g>
              <g class="earR" transform="translate(22,-12)"><rect class="fill" width="12" height="18" rx="6"/></g>
            </g>
          </g>

          <!-- Tail -->
          <g class="tail" transform="translate(86,120)">
            <path class="fill" d="M0 0 C -20 10 -40 30 -50 60 C -30 48 -12 36 8 30 Z"/>
          </g>

          <!-- Forelegs -->
          <g transform="translate(300,140)">
            <g class="femurFL"><rect class="fill" x="-8" y="0" width="16" height="78" rx="8"/></g>
            <g class="tibiaFL" transform="translate(0,72)"><rect class="fill" x="-7" y="0" width="14" height="68" rx="7"/></g>
          </g>
          <g transform="translate(360,140)">
            <g class="femurFR"><rect class="fill" x="-8" y="0" width="16" height="78" rx="8"/></g>
            <g class="tibiaFR" transform="translate(0,72)"><rect class="fill" x="-7" y="0" width="14" height="68" rx="7"/></g>
          </g>

          <!-- Hindlegs -->
          <g transform="translate(220,150)">
            <g class="femurHL"><rect class="fill" x="-10" y="0" width="20" height="80" rx="10"/></g>
            <g class="tibiaHL" transform="translate(0,76)"><rect class="fill" x="-9" y="0" width="18" height="70" rx="9"/></g>
          </g>
          <g transform="translate(160,150)">
            <g class="femurHR"><rect class="fill" x="-10" y="0" width="20" height="80" rx="10"/></g>
            <g class="tibiaHR" transform="translate(0,76)"><rect class="fill" x="-9" y="0" width="18" height="70" rx="9"/></g>
          </g>

          <!-- Bridle accent -->
          <g transform="translate(365,62)">
            <rect class="metal" x="0" y="0" width="46" height="6" rx="3"/>
            <circle class="metal" cx="46" cy="3" r="5"/>
          </g>
        </svg>
      </div>
    </div>
  </main>

  <!-- Lower HUD readouts -->
  <div class="hud">
    <div class="panel">
      <span id="readoutSpeed">Speed: 1.00x</span>
      <span>•</span>
      <span id="readoutFps">FPS: —</span>
      <span>•</span>
      <span id="readoutParticles">Dust: —</span>
    </div>
  </div>

  <aside class="info" aria-live="polite">
    <h3>About this Demo</h3>
    <p>SVG biomechanics + layered parallax terrain + canvas dust particles. Tweak speed, scale, and theme for different moods. Built as a single self‑contained file.</p>
  </aside>

  <script>
    // === UI Controls ===
    const root = document.documentElement;
    const speedRange = document.getElementById('speed');
    const scaleRange = document.getElementById('scale');
    const themeSel = document.getElementById('theme');
    const toggleBtn = document.getElementById('toggle');
    const horseWrap = document.getElementById('horseWrap');

    const readoutSpeed = document.getElementById('readoutSpeed');
    const readoutFps = document.getElementById('readoutFps');
    const readoutParticles = document.getElementById('readoutParticles');

    function updateSpeed(){
      const v = parseFloat(speedRange.value);
      root.style.setProperty('--speed', v.toFixed(2));
      readoutSpeed.textContent = `Speed: ${v.toFixed(2)}x`;
    }
    function updateScale(){
      const s = parseFloat(scaleRange.value);
      root.style.setProperty('--horse-scale', s.toFixed(2));
    }
    function applyTheme(name){
      switch(name){
        case 'dawn':
          document.body.style.background = 'radial-gradient(1200px 500px at 20% -10%, rgba(255,145,77,.18), transparent 60%), linear-gradient(180deg,#1a1110 0%, #1a1412 40%, #231b16 100%)';
          break;
        case 'desert':
          document.body.style.background = 'radial-gradient(1200px 500px at 20% -10%, rgba(255,228,160,.14), transparent 60%), linear-gradient(180deg,#0f0d08 0%, #0f0d08 40%, #131008 100%)';
          break;
        default:
          document.body.style.background = 'radial-gradient(1200px 500px at 20% -10%, rgba(127,114,255,.18), transparent 60%), linear-gradient(180deg,#0b0c10 0%, #0b0c10 40%, #0e1118 100%)';
      }
    }

    speedRange.addEventListener('input', updateSpeed);
    scaleRange.addEventListener('input', updateScale);
    themeSel.addEventListener('change', e=> applyTheme(e.target.value));

    let paused = false;
    toggleBtn.addEventListener('click', ()=>{
      paused = !paused;
      toggleBtn.textContent = paused ? 'Play' : 'Pause';
      document.querySelector('.stage-inner').classList.toggle('paused', paused);
      horseWrap.classList.toggle('paused', paused);
    });

    updateSpeed();
    updateScale();

    // === Canvas Dust Particles ===
    const canvas = document.getElementById('dust');
    const ctx = canvas.getContext('2d');
    let w, h, ratio;
    function resize(){
      w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; ratio = window.devicePixelRatio||1; canvas.width = w*ratio; canvas.height = h*ratio; canvas.style.width = w+'px'; canvas.style.height = h+'px'; ctx.setTransform(ratio,0,0,ratio,0,0);
    }
    window.addEventListener('resize', resize); resize();

    const particles = [];
    function spawnDust(){
      const baseX = window.innerWidth/2 - 60; // behind horse
      const baseY = window.innerHeight*0.81;  // near ground
      const s = parseFloat(getComputedStyle(root).getPropertyValue('--speed')) || 1;
      const n = Math.floor(2*s + Math.random()*2);
      for(let i=0;i<n;i++){
        particles.push({
          x: baseX + Math.random()*10,
          y: baseY + Math.random()*6,
          vx: - (1.2 + Math.random()*1.5) * (1.3*s),
          vy: - (0.8 + Math.random()*0.6) * (0.9*s),
          a: 0.6 + Math.random()*0.3,
          r: 2 + Math.random()*3,
          life: 0,
          max: 60 + Math.random()*40
        });
      }
    }

    let lastT=0, fps=0, frame=0;
    function loop(t){
      requestAnimationFrame(loop);
      if(paused) return;

      // FPS calc
      if(lastT){ fps = 1000/(t-lastT); }
      lastT = t; frame++;
      if(frame%10===0){ readoutFps.textContent = `FPS: ${Math.round(fps)}`; }

      // spawn
      if(frame%2===0) spawnDust();

      // update/draw
      ctx.clearRect(0,0,w,h);
      for(let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        p.life++;
        p.x += p.vx; p.y += p.vy; p.vy += 0.06; // gravity
        p.a *= 0.98; p.r *= 0.995;
        ctx.globalAlpha = Math.max(0, p.a*(1 - p.life/p.max));
        ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fillStyle = 'rgba(200,180,130,1)'; ctx.fill();
        if(p.life>p.max) particles.splice(i,1);
      }
      readoutParticles.textContent = `Dust: ${particles.length}`;
    }
    requestAnimationFrame(loop);
  </script>
</body>
</html>
